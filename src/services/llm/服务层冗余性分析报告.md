# src/services/llm ç›®å½•å†—ä½™æ€§åˆ†ææŠ¥å‘Š

## æ¦‚è¿°

æœ¬æŠ¥å‘Šæ·±å…¥åˆ†æäº† `src/services/llm` ç›®å½•ä¸­å„æ¨¡å—ä¸åŸºç¡€è®¾æ–½å±‚çš„åŠŸèƒ½é‡å æƒ…å†µï¼Œè¯†åˆ«äº†å†—ä½™å®ç°ï¼Œå¹¶æä¾›äº†è¯¦ç»†çš„é‡æ„å»ºè®®ã€‚

## å½“å‰æ¶æ„æ¦‚è§ˆ

### å±‚æ¬¡ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Services Layer (src/services/llm/)                      â”‚
â”‚ - ä¸šåŠ¡é€»è¾‘åè°ƒ                                            â”‚
â”‚ - é«˜çº§æœåŠ¡ç»„åˆ                                            â”‚
â”‚ - åº”ç”¨å±‚æŠ½è±¡                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Core Layer (src/core/llm/)                              â”‚
â”‚ - æ ¸å¿ƒä¸šåŠ¡å®ä½“                                            â”‚
â”‚ - åŸºç¡€æœåŠ¡å®ç°                                            â”‚
â”‚ - é¢†åŸŸé€»è¾‘                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Infrastructure Layer (src/infrastructure/llm/)           â”‚
â”‚ - å¤–éƒ¨ä¾èµ–æŠ½è±¡                                            â”‚
â”‚ - æŠ€æœ¯åŸºç¡€è®¾æ–½                                            â”‚
â”‚ - åè®®é€‚é…                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å†—ä½™æ€§åˆ†æ

### ğŸ”´ é«˜åº¦å†—ä½™çš„æ¨¡å—

#### 1. å·¥å‚æ¨¡å¼é‡å¤å®ç°

**é—®é¢˜**: æœåŠ¡å±‚å®ç°äº†å¤šä¸ªå·¥å‚ç±»ï¼Œä¸åŸºç¡€è®¾æ–½å±‚åŠŸèƒ½é‡å¤

| æ¨¡å— | ä½ç½® | å†—ä½™ç¨‹åº¦ | é—®é¢˜æè¿° |
|------|------|----------|----------|
| [`BaseFactory`](src/services/llm/core/base_factory.py) | Services/LLM | ğŸ”´ æé«˜ | ä¸åŸºç¡€è®¾æ–½å±‚å·¥å‚æ¨¡å¼é‡å¤ |
| [`ClientFactory`](src/services/llm/factory/client_factory.py) | Services/LLM | ğŸ”´ é«˜ | ç®€å•åŒ…è£…Coreå±‚ï¼Œæ— å®é™…ä»·å€¼ |
| [`LLMFactory`](src/core/llm/factory.py) | Core/LLM | ğŸŸ¡ ä¸­ | éƒ¨åˆ†åŠŸèƒ½ä¸åŸºç¡€è®¾æ–½å±‚é‡å  |

**åŸºç¡€è®¾æ–½å±‚å¯¹åº”å®ç°**:
- [`TokenCalculatorFactory`](src/infrastructure/llm/token_calculators/token_calculator_factory.py)
- [`HttpClientFactory`](src/infrastructure/llm/http_client/http_client_factory.py)

**å»ºè®®æ“ä½œ**:
```bash
# åˆ é™¤å†—ä½™å·¥å‚
rm src/services/llm/core/base_factory.py
rm src/services/llm/factory/client_factory.py
rm -rf src/services/llm/factory/
```

#### 2. è¿æ¥æ± é‡å¤å®ç°

**é—®é¢˜**: æœåŠ¡å±‚å®ç°äº†HTTPè¿æ¥æ± ï¼Œä¸åŸºç¡€è®¾æ–½å±‚åŠŸèƒ½é‡å¤

| æ¨¡å— | ä½ç½® | å†—ä½™ç¨‹åº¦ | é—®é¢˜æè¿° |
|------|------|----------|----------|
| [`HTTPConnectionPool`](src/services/llm/pool/connection_pool.py) | Services/LLM | ğŸ”´ æé«˜ | ä¸åŸºç¡€è®¾æ–½å±‚HTTPå®¢æˆ·ç«¯é‡å¤ |
| [`ConnectionPoolManager`](src/services/llm/pool/connection_pool.py) | Services/LLM | ğŸ”´ æé«˜ | é‡å¤çš„è¿æ¥æ± ç®¡ç†é€»è¾‘ |

**åŸºç¡€è®¾æ–½å±‚å¯¹åº”å®ç°**:
- [`HttpClientFactory`](src/infrastructure/llm/http_client/http_client_factory.py) å·²å†…ç½®è¿æ¥æ± ç®¡ç†
- å„æä¾›å•†HTTPå®¢æˆ·ç«¯å†…ç½®è¿æ¥æ± 

**å»ºè®®æ“ä½œ**:
```bash
# åˆ é™¤è¿æ¥æ± æ¨¡å—
rm -rf src/services/llm/pool/
```

#### 3. Tokenè®¡ç®—æœåŠ¡é‡å¤

**é—®é¢˜**: æœåŠ¡å±‚Tokenè®¡ç®—æœåŠ¡ä¸åŸºç¡€è®¾æ–½å±‚åŠŸèƒ½é‡å¤

| æ¨¡å— | ä½ç½® | å†—ä½™ç¨‹åº¦ | é—®é¢˜æè¿° |
|------|------|----------|----------|
| [`TokenCalculationService`](src/services/llm/token_calculation_service.py) | Services/LLM | ğŸ”´ é«˜ | ç®€å•åŒ…è£…åŸºç¡€è®¾æ–½å±‚åŠŸèƒ½ |
| [`token_calculation_decorator.py`](src/services/llm/token_calculation_decorator.py) | Services/LLM | ğŸŸ¡ ä¸­ | è£…é¥°å™¨æ¨¡å¼æœ‰ä»·å€¼ä½†å¯ç®€åŒ– |

**åŸºç¡€è®¾æ–½å±‚å¯¹åº”å®ç°**:
- [`TokenCalculatorFactory`](src/infrastructure/llm/token_calculators/token_calculator_factory.py)
- å„æä¾›å•†Tokenè®¡ç®—å™¨

**å»ºè®®æ“ä½œ**:
```bash
# ç®€åŒ–Tokenè®¡ç®—æœåŠ¡
rm src/services/llm/token_calculation_service.py
# ä¿ç•™è£…é¥°å™¨ä½†ç®€åŒ–å®ç°
```

### ğŸŸ¡ ä¸­åº¦å†—ä½™çš„æ¨¡å—

#### 1. é™çº§ç³»ç»Ÿé‡å¤

**é—®é¢˜**: æœåŠ¡å±‚é™çº§ç³»ç»Ÿä¸Coreå±‚åŠŸèƒ½é‡å 

| æ¨¡å— | ä½ç½® | å†—ä½™ç¨‹åº¦ | é—®é¢˜æè¿° |
|------|------|----------|----------|
| [`FallbackManager`](src/services/llm/fallback_system/fallback_manager.py) | Services/LLM | ğŸŸ¡ ä¸­ | ä¸Coreå±‚é™çº§ç®¡ç†å™¨åŠŸèƒ½é‡å  |
| [`FallbackEngine`](src/services/llm/fallback_system/fallback_engine.py) | Services/LLM | ğŸŸ¡ ä¸­ | é‡å¤çš„é™çº§æ‰§è¡Œé€»è¾‘ |
| [`FallbackTracker`](src/services/llm/fallback_system/fallback_tracker.py) | Services/LLM | ğŸŸ¡ ä¸­ | é‡å¤çš„ç»Ÿè®¡è·Ÿè¸ª |

**Coreå±‚å¯¹åº”å®ç°**:
- [`FallbackManager`](src/core/llm/wrappers/fallback_manager.py)
- é™çº§ç­–ç•¥å®ç°

**å»ºè®®æ“ä½œ**:
```bash
# ä¿ç•™åè°ƒå™¨ï¼Œåˆ é™¤é‡å¤å®ç°
rm src/services/llm/fallback_system/fallback_engine.py
rm src/services/llm/fallback_system/fallback_tracker.py
rm src/services/llm/fallback_system/fallback_strategy_manager.py
# ç®€åŒ–FallbackManagerä¸ºçº¯åè°ƒå™¨
```

#### 2. é‡è¯•æœºåˆ¶é‡å¤

**é—®é¢˜**: æœåŠ¡å±‚é‡è¯•ç®¡ç†å™¨ä¸åŸºç¡€è®¾æ–½å±‚åŠŸèƒ½é‡å 

| æ¨¡å— | ä½ç½® | å†—ä½™ç¨‹åº¦ | é—®é¢˜æè¿° |
|------|------|----------|----------|
| [`RetryManager`](src/services/llm/retry/retry_manager.py) | Services/LLM | ğŸŸ¡ ä¸­ | é€šç”¨é‡è¯•é€»è¾‘ï¼Œå¯å¤ç”¨åŸºç¡€è®¾æ–½å±‚ |
| [`retry_config.py`](src/services/llm/retry/retry_config.py) | Services/LLM | ğŸŸ¡ ä¸­ | é…ç½®ç±»å¯å¤ç”¨ |

**åŸºç¡€è®¾æ–½å±‚å¯¹åº”å®ç°**:
- HTTPå®¢æˆ·ç«¯å†…ç½®é‡è¯•æœºåˆ¶
- å„æä¾›å•†å®¢æˆ·ç«¯é‡è¯•é€»è¾‘

**å»ºè®®æ“ä½œ**:
```bash
# ç®€åŒ–é‡è¯•ç®¡ç†å™¨ï¼Œå¤ç”¨åŸºç¡€è®¾æ–½å±‚
rm src/services/llm/retry/retry_manager.py
# ä¿ç•™é…ç½®ç±»ä½œä¸ºæ¥å£é€‚é…
```

### ğŸŸ¢ ä½åº¦å†—ä½™ä½†æœ‰ä»·å€¼çš„æ¨¡å—

#### 1. ç®¡ç†å™¨åè°ƒå±‚

**æ¨¡å—**: [`LLMManager`](src/services/llm/manager.py)
**ä½ç½®**: Services/LLM
**å†—ä½™ç¨‹åº¦**: ğŸŸ¢ ä½
**ä»·å€¼**: é«˜ - ä½œä¸ºæœåŠ¡å±‚çš„ç»Ÿä¸€åè°ƒå…¥å£

**ä¿ç•™ç†ç”±**:
- åè°ƒå¤šä¸ªæœåŠ¡ç»„ä»¶
- æä¾›ç»Ÿä¸€çš„å¯¹å¤–æ¥å£
- ç®¡ç†æ•´ä½“åˆå§‹åŒ–æµç¨‹
- å¤„ç†ç®¡ç†å™¨é—´é€šä¿¡

#### 2. å®¢æˆ·ç«¯ç®¡ç†

**æ¨¡å—**: [`LLMClientManager`](src/services/llm/core/client_manager.py)
**ä½ç½®**: Services/LLM
**å†—ä½™ç¨‹åº¦**: ğŸŸ¢ ä½
**ä»·å€¼**: é«˜ - ä¸“æ³¨å®¢æˆ·ç«¯ç”Ÿå‘½å‘¨æœŸç®¡ç†

**ä¿ç•™ç†ç”±**:
- ä¸“æ³¨å®¢æˆ·ç«¯æ³¨å†Œå’Œæ³¨é”€
- ç®¡ç†é»˜è®¤å®¢æˆ·ç«¯
- æä¾›å®¢æˆ·ç«¯ä¿¡æ¯æŸ¥è¯¢

#### 3. è¯·æ±‚æ‰§è¡Œå™¨

**æ¨¡å—**: [`LLMRequestExecutor`](src/services/llm/core/request_executor.py)
**ä½ç½®**: Services/LLM
**å†—ä½™ç¨‹åº¦**: ğŸŸ¢ ä½
**ä»·å€¼**: é«˜ - ä¸“æ³¨è¯·æ±‚æ‰§è¡Œå’Œé™çº§å¤„ç†

**ä¿ç•™ç†ç”±**:
- ä¸“æ³¨LLMè¯·æ±‚æ‰§è¡Œ
- å¤„ç†é™çº§é€»è¾‘
- æµå¼è¯·æ±‚å¤„ç†

## é‡æ„å»ºè®®

### 1. ç«‹å³åˆ é™¤çš„å†—ä½™æ¨¡å—

```bash
# å·¥å‚æ¨¡å¼å†—ä½™
rm src/services/llm/core/base_factory.py
rm -rf src/services/llm/factory/

# è¿æ¥æ± å†—ä½™
rm -rf src/services/llm/pool/

# Tokenè®¡ç®—æœåŠ¡å†—ä½™
rm src/services/llm/token_calculation_service.py

# é™çº§ç³»ç»Ÿå†—ä½™
rm src/services/llm/fallback_system/fallback_engine.py
rm src/services/llm/fallback_system/fallback_tracker.py
rm src/services/llm/fallback_system/fallback_strategy_manager.py
rm src/services/llm/fallback_system/fallback_config_manager.py
rm src/services/llm/fallback_system/fallback_config.py
rm src/services/llm/fallback_system/fallback_executor.py
rm src/services/llm/fallback_system/fallback_factory.py
rm src/services/llm/fallback_system/strategies.py

# é‡è¯•æœºåˆ¶å†—ä½™
rm src/services/llm/retry/retry_manager.py
rm src/services/llm/retry/strategies.py

# å…¶ä»–å†—ä½™
rm src/services/llm/error_handler.py  # ä¸Coreå±‚å¼‚å¸¸å¤„ç†é‡å¤
rm src/services/llm/state_machine.py  # å¯ç®€åŒ–ä¸ºå†…éƒ¨å®ç°
```

### 2. ç®€åŒ–é‡æ„çš„æ¨¡å—

#### Tokenè®¡ç®—è£…é¥°å™¨
```python
# ç®€åŒ–åçš„å®ç°
from src.infrastructure.llm.token_calculators import get_token_calculator_factory

class TokenCalculationDecorator:
    """Tokenè®¡ç®—è£…é¥°å™¨ - ç®€åŒ–ç‰ˆæœ¬"""
    
    def __init__(self):
        self._factory = get_token_calculator_factory()
    
    def calculate_tokens(self, text: str, model_type: str, model_name: str) -> int:
        calculator = self._factory.get_calculator(model_type, model_name)
        return calculator.count_tokens(text) or 0
```

#### é™çº§ç®¡ç†å™¨
```python
# ç®€åŒ–åçš„å®ç°
class FallbackManager:
    """é™çº§ç®¡ç†å™¨ - çº¯åè°ƒå™¨ç‰ˆæœ¬"""
    
    def __init__(self, core_fallback_manager, task_group_manager):
        self._core_manager = core_fallback_manager
        self._task_group_manager = task_group_manager
    
    async def execute_with_fallback(self, primary_target, fallback_groups, prompt, **kwargs):
        # å§”æ‰˜ç»™Coreå±‚å®ç°
        return await self._core_manager.generate_with_fallback(
            messages=[prompt],  # ç®€åŒ–è½¬æ¢
            primary_model=primary_target,
            **kwargs
        )
```

### 3. ä¿ç•™çš„æ ¸å¿ƒæ¨¡å—

#### å¿…é¡»ä¿ç•™çš„æ¨¡å—
```python
# æ ¸å¿ƒåè°ƒå™¨
src/services/llm/manager.py                    # LLMManager - ä¸»åè°ƒå™¨
src/services/llm/core/client_manager.py        # LLMClientManager - å®¢æˆ·ç«¯ç®¡ç†
src/services/llm/core/request_executor.py      # LLMRequestExecutor - è¯·æ±‚æ‰§è¡Œ
src/services/llm/core/manager_registry.py      # ç®¡ç†å™¨æ³¨å†Œè¡¨

# ç®€åŒ–åçš„é™çº§ç³»ç»Ÿ
src/services/llm/fallback_system/fallback_manager.py  # ç®€åŒ–ç‰ˆåè°ƒå™¨

# é…ç½®å’Œå·¥å…·
src/services/llm/config/token_config_provider.py     # é…ç½®æä¾›è€…
src/services/llm/utils/metadata_service.py           # å…ƒæ•°æ®æœåŠ¡
src/services/llm/utils/config_extractor.py           # é…ç½®æå–å™¨

# æ’ä»¶ç³»ç»Ÿ
src/services/llm/plugins/plugin_manager.py           # æ’ä»¶ç®¡ç†å™¨
src/services/llm/plugins/interfaces.py               # æ’ä»¶æ¥å£

# è°ƒåº¦ç³»ç»Ÿ
src/services/llm/scheduling/concurrency_controller.py # å¹¶å‘æ§åˆ¶
src/services/llm/scheduling/polling_pool.py          # è½®è¯¢æ± 
src/services/llm/scheduling/task_group_manager.py     # ä»»åŠ¡ç»„ç®¡ç†

# ç®€åŒ–çš„é‡è¯•é…ç½®
src/services/llm/retry/retry_config.py               # é‡è¯•é…ç½®

# ç®€åŒ–çš„Tokenè£…é¥°å™¨
src/services/llm/token_calculation_decorator.py      # ç®€åŒ–ç‰ˆè£…é¥°å™¨
```

## é‡æ„åçš„æ¶æ„

### ç®€åŒ–åçš„ç›®å½•ç»“æ„
```
src/services/llm/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ manager.py                    # ä¸»åè°ƒå™¨
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ client_manager.py        # å®¢æˆ·ç«¯ç®¡ç†
â”‚   â”œâ”€â”€ request_executor.py      # è¯·æ±‚æ‰§è¡Œ
â”‚   â””â”€â”€ manager_registry.py      # ç®¡ç†å™¨æ³¨å†Œè¡¨
â”œâ”€â”€ fallback_system/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ fallback_manager.py      # ç®€åŒ–ç‰ˆé™çº§åè°ƒå™¨
â”œâ”€â”€ retry/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ retry_config.py          # é‡è¯•é…ç½®
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ token_config_provider.py # é…ç½®æä¾›è€…
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ metadata_service.py      # å…ƒæ•°æ®æœåŠ¡
â”‚   â””â”€â”€ config_extractor.py      # é…ç½®æå–å™¨
â”œâ”€â”€ plugins/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ plugin_manager.py        # æ’ä»¶ç®¡ç†å™¨
â”‚   â”œâ”€â”€ interfaces.py            # æ’ä»¶æ¥å£
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ scheduling/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ concurrency_controller.py # å¹¶å‘æ§åˆ¶
â”‚   â”œâ”€â”€ polling_pool.py          # è½®è¯¢æ± 
â”‚   â””â”€â”€ task_group_manager.py     # ä»»åŠ¡ç»„ç®¡ç†
â””â”€â”€ token_calculation_decorator.py # ç®€åŒ–ç‰ˆTokenè£…é¥°å™¨
```

### ä¾èµ–å…³ç³»ç®€åŒ–
```
Services Layer (ç®€åŒ–å)
â”œâ”€â”€ LLMManager (ä¸»åè°ƒå™¨)
â”‚   â”œâ”€â”€ LLMClientManager (å®¢æˆ·ç«¯ç®¡ç†)
â”‚   â”œâ”€â”€ LLMRequestExecutor (è¯·æ±‚æ‰§è¡Œ)
â”‚   â””â”€â”€ FallbackManager (é™çº§åè°ƒ)
â”œâ”€â”€ TaskGroupManager (ä»»åŠ¡ç»„ç®¡ç†)
â”œâ”€â”€ PluginManager (æ’ä»¶ç®¡ç†)
â””â”€â”€ TokenCalculationDecorator (Tokenè£…é¥°å™¨)
    â†“ ä¾èµ–
Infrastructure Layer
â”œâ”€â”€ TokenCalculatorFactory (Tokenè®¡ç®—)
â”œâ”€â”€ HttpClientFactory (HTTPå®¢æˆ·ç«¯)
â”œâ”€â”€ å„æä¾›å•†å®¢æˆ·ç«¯
â””â”€â”€ å„æä¾›å•†Tokenè®¡ç®—å™¨
```

## å®æ–½è®¡åˆ’

### é˜¶æ®µ1: åˆ é™¤å†—ä½™æ¨¡å— (1-2å¤©)
1. å¤‡ä»½å½“å‰ä»£ç 
2. åˆ é™¤é«˜åº¦å†—ä½™çš„æ¨¡å—
3. æ›´æ–°å¯¼å…¥å¼•ç”¨
4. è¿è¡Œæµ‹è¯•ç¡®ä¿åŸºç¡€åŠŸèƒ½æ­£å¸¸

### é˜¶æ®µ2: ç®€åŒ–ç°æœ‰æ¨¡å— (2-3å¤©)
1. ç®€åŒ–Tokenè®¡ç®—è£…é¥°å™¨
2. ç®€åŒ–é™çº§ç®¡ç†å™¨
3. æ›´æ–°é…ç½®å’Œæ¥å£
4. æµ‹è¯•ç®€åŒ–åçš„åŠŸèƒ½

### é˜¶æ®µ3: ä¼˜åŒ–ä¾èµ–å…³ç³» (1-2å¤©)
1. æ›´æ–°æ¨¡å—é—´ä¾èµ–
2. ä¼˜åŒ–å¯¼å…¥è·¯å¾„
3. æ¸…ç†æ— ç”¨å¯¼å…¥
4. éªŒè¯åŠŸèƒ½å®Œæ•´æ€§

### é˜¶æ®µ4: æ–‡æ¡£å’Œæµ‹è¯• (1-2å¤©)
1. æ›´æ–°æ¶æ„æ–‡æ¡£
2. æ›´æ–°APIæ–‡æ¡£
3. è¡¥å……å•å…ƒæµ‹è¯•
4. é›†æˆæµ‹è¯•éªŒè¯

## é¢„æœŸæ”¶ç›Š

### ä»£ç ç®€åŒ–
- **å‡å°‘ä»£ç é‡**: é¢„è®¡å‡å°‘40-50%çš„æœåŠ¡å±‚ä»£ç 
- **é™ä½å¤æ‚åº¦**: ç§»é™¤é‡å¤çš„å·¥å‚å’Œè¿æ¥æ± å®ç°
- **æé«˜å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„èŒè´£åˆ†ç¦»

### æ€§èƒ½æå‡
- **å‡å°‘å†…å­˜ä½¿ç”¨**: ç§»é™¤é‡å¤çš„å¯¹è±¡å®ä¾‹
- **å‡å°‘åˆå§‹åŒ–å¼€é”€**: ç®€åŒ–ç»„ä»¶åˆå§‹åŒ–æµç¨‹
- **æé«˜å“åº”é€Ÿåº¦**: å‡å°‘ä¸å¿…è¦çš„ä¸­é—´å±‚

### æ¶æ„ä¼˜åŒ–
- **æ¸…æ™°çš„å±‚æ¬¡ç»“æ„**: Serviceså±‚ä¸“æ³¨åè°ƒï¼ŒInfrastructureå±‚ä¸“æ³¨å®ç°
- **æ›´å¥½çš„å¯æµ‹è¯•æ€§**: ç®€åŒ–çš„ä¾èµ–å…³ç³»ä¾¿äºå•å…ƒæµ‹è¯•
- **æ›´å¼ºçš„æ‰©å±•æ€§**: åŸºäºåŸºç¡€è®¾æ–½å±‚çš„ç»Ÿä¸€æ‰©å±•

## é£é™©è¯„ä¼°

### é‡æ„é£é™©
- **åŠŸèƒ½å›å½’é£é™©**: åˆ é™¤æ¨¡å—å¯èƒ½å½±å“ç°æœ‰åŠŸèƒ½
- **å…¼å®¹æ€§é£é™©**: ç°æœ‰ä»£ç å¯èƒ½ä¾èµ–è¢«åˆ é™¤çš„æ¨¡å—
- **æµ‹è¯•è¦†ç›–é£é™©**: éœ€è¦ç¡®ä¿é‡æ„ååŠŸèƒ½å®Œæ•´

### ç¼“è§£æªæ–½
- **æ¸è¿›å¼é‡æ„**: åˆ†é˜¶æ®µåˆ é™¤å’Œç®€åŒ–
- **å……åˆ†æµ‹è¯•**: æ¯ä¸ªé˜¶æ®µéƒ½è¿›è¡Œå®Œæ•´æµ‹è¯•
- **å‘åå…¼å®¹**: ä¿ç•™å¿…è¦çš„æ¥å£é€‚é…

## ç»“è®º

é€šè¿‡è¿™æ¬¡é‡æ„ï¼Œ`src/services/llm` ç›®å½•å°†è·å¾—ï¼š

1. **æ›´æ¸…æ™°çš„èŒè´£åˆ†ç¦»**: Serviceså±‚ä¸“æ³¨åè°ƒï¼Œä¸å†é‡å¤åŸºç¡€è®¾æ–½åŠŸèƒ½
2. **æ›´ç®€æ´çš„ä»£ç ç»“æ„**: ç§»é™¤å¤§é‡å†—ä½™å®ç°
3. **æ›´å¥½çš„å¯ç»´æŠ¤æ€§**: åŸºäºåŸºç¡€è®¾æ–½å±‚çš„ç»Ÿä¸€æ¶æ„
4. **æ›´é«˜çš„æ€§èƒ½**: å‡å°‘ä¸å¿…è¦çš„ä¸­é—´å±‚å’Œé‡å¤è®¡ç®—

**å¼ºçƒˆå»ºè®®ç«‹å³å¼€å§‹é‡æ„**ï¼Œè¿™å°†æ˜¾è‘—æ”¹å–„ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½ã€‚