# 存储配置文件
# 定义存储后端和仓库的配置

# 存储后端配置
backends:
  # SQLite后端配置
  sqlite:
    db_path: "${STORAGE_DB_PATH:storage.db}"
    connection_pool_size: "${STORAGE_POOL_SIZE:5}"
    timeout: "${STORAGE_TIMEOUT:30.0}"
    enable_wal_mode: "${STORAGE_WAL_MODE:true}"
    enable_foreign_keys: "${STORAGE_FOREIGN_KEYS:true}"
    enable_auto_vacuum: "${STORAGE_AUTO_VACUUM:false}"
    cache_size: "${STORAGE_CACHE_SIZE:2000}"
    temp_store: "${STORAGE_TEMP_STORE:memory}"
    synchronous_mode: "${STORAGE_SYNC_MODE:NORMAL}"
    journal_mode: "${STORAGE_JOURNAL_MODE:WAL}"
    backup_path: "${STORAGE_BACKUP_PATH:backups}"
    enable_compression: "${STORAGE_COMPRESSION:false}"
    compression_threshold: "${STORAGE_COMPRESSION_THRESHOLD:1024}"
    enable_ttl: "${STORAGE_TTL:false}"
    default_ttl_seconds: "${STORAGE_TTL_SECONDS:3600}"
    cleanup_interval_seconds: "${STORAGE_CLEANUP_INTERVAL:300}"
    enable_backup: "${STORAGE_BACKUP:false}"
    backup_interval_hours: "${STORAGE_BACKUP_INTERVAL:24}"
    max_backup_files: "${STORAGE_MAX_BACKUPS:7}"
  
  # 内存后端配置
  memory:
    max_items: "${MEMORY_MAX_ITEMS:10000}"
    enable_compression: "${MEMORY_COMPRESSION:false}"
    compression_threshold: "${MEMORY_COMPRESSION_THRESHOLD:1024}"
    enable_ttl: "${MEMORY_TTL:false}"
    default_ttl_seconds: "${MEMORY_TTL_SECONDS:3600}"
    cleanup_interval_seconds: "${MEMORY_CLEANUP_INTERVAL:300}"
  
  # 文件后端配置
  file:
    base_path: "${FILE_BASE_PATH:data/storage}"
    enable_compression: "${FILE_COMPRESSION:false}"
    compression_threshold: "${FILE_COMPRESSION_THRESHOLD:1024}"
    enable_ttl: "${FILE_TTL:false}"
    default_ttl_seconds: "${FILE_TTL_SECONDS:3600}"
    cleanup_interval_seconds: "${FILE_CLEANUP_INTERVAL:300}"
    enable_backup: "${FILE_BACKUP:false}"
    backup_interval_hours: "${FILE_BACKUP_INTERVAL:24}"
    max_backup_files: "${FILE_MAX_BACKUPS:7}"

# 仓库配置
repositories:
  # 状态仓库配置
  state:
    backend_type: "${STATE_BACKEND_TYPE:sqlite}"
    enable_cache: "${STATE_CACHE:true}"
    cache_size: "${STATE_CACHE_SIZE:1000}"
    cache_ttl: "${STATE_CACHE_TTL:300}"
  
  # 历史仓库配置
  history:
    backend_type: "${HISTORY_BACKEND_TYPE:sqlite}"
    enable_cache: "${HISTORY_CACHE:true}"
    cache_size: "${HISTORY_CACHE_SIZE:500}"
    cache_ttl: "${HISTORY_CACHE_TTL:600}"
  
  # 快照仓库配置
  snapshot:
    backend_type: "${SNAPSHOT_BACKEND_TYPE:file}"
    enable_cache: "${SNAPSHOT_CACHE:true}"
    cache_size: "${SNAPSHOT_CACHE_SIZE:100}"
    cache_ttl: "${SNAPSHOT_CACHE_TTL:1800}"
  
  # 检查点仓库配置
  checkpoint:
    backend_type: "${CHECKPOINT_BACKEND_TYPE:sqlite}"
    enable_cache: "${CHECKPOINT_CACHE:true}"
    cache_size: "${CHECKPOINT_CACHE_SIZE:200}"
    cache_ttl: "${CHECKPOINT_CACHE_TTL:900}"