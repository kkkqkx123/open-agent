1.项目搜索+后续工作流：llm->条件[结束任务工具调用+总结，保留状态]->
llm->条件[信息不足：信息不足工具调用，描述需要补充的信息，退回上一个节点][信息足够：开始执行任务]

2.工具：括号检查，用小模型处理
参考：
```
// balance-check.js
/*
输出类似：
Line 238, Col 1: Found '(', balance = -19
Line 239, Col 9: Found '(', balance = -18
Line 239, Col 25: Found ')', balance = -19
ERROR: Unmatched closing parenthesis at line 239, col 25
Line 240, Col 9: Found '(', balance = -18
Line 241, Col 5: Found '(', balance = -17
Line 242, Col 19: Found '(', balance = -16
Line 243, Col 21: Found '(', balance = -15
Line 243, Col 32: Found ')', balance = -16
ERROR: Unmatched closing parenthesis at line 243, col 32
Line 243, Col 52: Found ')', balance = -17
ERROR: Unmatched closing parenthesis at line 243, col 52
Line 243, Col 53: Found ')', balance = -18
ERROR: Unmatched closing parenthesis at line 243, col 53
Line 244, Col 5: Found '(', balance = -17
*/
const fs = require('fs');

// Read the lifecycle-relationships.ts file
const filePath = 'src/service/parser/constants/queries/cpp/lifecycle-relationships.ts';
const content = fs.readFileSync(filePath, 'utf8');

// Extract just the query string (the part after "export default `")
const startMarker = 'export default `';
const startIndex = content.indexOf(startMarker);
if (startIndex === -1) {
    console.error('Could not find export default marker');
    process.exit(1);
}

const queryString = content.substring(startIndex + startMarker.length, content.length - 1); // Remove trailing backtick

function findUnbalancedParentheses(query) {
    let balance = 0;
    let inString = false;
    let escapeNext = false;
    let lastParenPos = -1;
    let lastParenChar = '';

    for (let i = 0; i < query.length; i++) {
        const char = query[i];

        if (escapeNext) {
            escapeNext = false;
            continue;
        }

        if (char === '\\') {
            escapeNext = true;
            continue;
        }

        if (char === '"' && !escapeNext) {
            inString = !inString;
            continue;
        }

        if (!inString) {
            if (char === '(') {
                balance++;
                lastParenPos = i;
                lastParenChar = char;
            } else if (char === ')') {
                balance--;
                lastParenPos = i;
                lastParenChar = char;
                
                if (balance < 0) {
                    console.log(`Unbalanced: Too many closing parentheses at position ${i}`);
                    console.log(`Context around position ${i}:`, query.substring(Math.max(0, i-50), Math.min(query.length, i+50)));
                    return { balanced: false, position: i, char: char };
                }
            }
        }
    }
    
    if (balance > 0) {
        console.log(`Unbalanced: Missing ${balance} closing parentheses`);
        console.log(`Last parentheses at position ${lastParenPos}:`, query.substring(Math.max(0, lastParenPos-50), Math.min(query.length, lastParenPos+50)));
        return { balanced: false, position: lastParenPos, char: lastParenChar };
    }
    
    console.log('Parentheses are balanced');
    return { balanced: true };
}

// Find unbalanced parentheses
findUnbalancedParentheses(queryString);

// Let's also check line by line to find the problematic area
function checkLines(query) {
    const lines = query.split('\n');
    let balance = 0;
    
    for (let i = 0; i < lines.length; i++) {
        const line = lines[i];
        const lineNum = i + 1;
        
        for (let j = 0; j < line.length; j++) {
            const char = line[j];
            
            if (char === '(') {
                balance++;
            } else if (char === ')') {
                balance--;
                if (balance < 0) {
                    console.log(`Line ${lineNum} has unbalanced parentheses:`, line.trim());
                    console.log(`Position in line: ${j}`);
                    console.log(`Context around line ${Math.max(1, lineNum-3)}-${Math.min(lines.length, lineNum+3)}:`);
                    for (let k = Math.max(0, i-3); k <= Math.min(lines.length-1, i+3); k++) {
                        console.log(`${k+1}: ${lines[k]}`);
                        if (k === i) {
                            // Mark the problematic character
                            let mark = '';
                            for (let m = 0; m < j; m++) mark += ' ';
                            mark += '^-- HERE';
                            console.log(`${' '.repeat(String(k+1).length)}: ${mark}`);
                        }
                    }
                    return;
                }
            }
        }
    }
}

console.log('\nChecking line by line:');
checkLines(queryString);
```